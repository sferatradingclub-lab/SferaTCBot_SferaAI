"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[614],{8233:(e,r,t)=>{t.r(r),t.d(r,{ChatPanel:()=>f});var i=t(9835),a=t(5931),s=t(3772),l=t(9225),n=t(1655),o=t(4967),d=t(6208),c=t(4230),u=t(7951),h=t(8607),x=t(5496);let m=(0,u.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function b(e){let{className:r,variant:t,size:a,asChild:s=!1,...l}=e,n=s?h.DX:"button";return(0,i.jsx)(n,{"data-slot":"button",className:(0,x.cn)(m({variant:t,size:a,className:r})),...l})}function g(e){let{className:r,...t}=e;return(0,i.jsx)("textarea",{"data-slot":"textarea",className:(0,x.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),...t})}let p=a.memo(e=>{let{entry:r,isLive:t=!1,onImageClick:a}=e;return(0,i.jsx)("div",{className:"flex items-start gap-3 ".concat("user"===r.speaker?"flex-row-reverse":"flex-row"),children:(0,i.jsxs)("div",{className:"flex flex-col ".concat("user"===r.speaker?"items-end":"items-start"),children:[(0,i.jsx)("span",{className:"mb-1 px-2 text-xs font-medium text-white/40",children:"user"===r.speaker?"You":"Sfera AI"}),r.youtubeVideo?(0,i.jsxs)("a",{href:r.youtubeVideo.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"group relative block w-full max-w-sm overflow-hidden rounded-xl border border-white/10 bg-black/40 transition-all duration-300 hover:border-[#0A84FF]/50 hover:shadow-[0_0_20px_rgba(10,132,255,0.3)]",children:[(0,i.jsxs)("div",{className:"relative aspect-video w-full overflow-hidden",children:[(0,i.jsx)("img",{src:r.youtubeVideo.thumbnailUrl,alt:r.youtubeVideo.title,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"}),(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 transition-colors group-hover:bg-black/10",children:(0,i.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full border border-white/30 bg-white/20 shadow-lg backdrop-blur-md transition-transform duration-300 group-hover:scale-110",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"white",viewBox:"0 0 256 256",children:(0,i.jsx)("path",{d:"M240,128a15.74,15.74,0,0,1-7.6,13.51L88.32,229.65a16,16,0,0,1-16.2.3A15.86,15.86,0,0,1,64,216.13V39.87a15.86,15.86,0,0,1,8.12-13.82,16,16,0,0,1,16.2.3L232.4,114.49A15.74,15.74,0,0,1,240,128Z"})})})})]}),(0,i.jsx)("div",{className:"p-3",children:(0,i.jsx)("h3",{className:"line-clamp-2 text-sm font-medium text-white transition-colors group-hover:text-[#0A84FF]",children:r.youtubeVideo.title})})]}):(0,i.jsxs)("div",{className:"max-w-md rounded-2xl p-4 transition-all duration-300 ".concat("user"===r.speaker?"rounded-br-sm border border-[#0A84FF]/30 bg-[#0A84FF]/60 text-white shadow-[0_4px_20px_rgba(10,132,255,0.2)] backdrop-blur-xl":"rounded-bl-sm border border-white/10 bg-white/10 text-white/90 shadow-[0_4px_20px_rgba(0,0,0,0.1)] backdrop-blur-xl"),children:[(0,i.jsxs)("p",{className:"text-base leading-relaxed",children:[(0,i.jsx)(s.A,{componentDecorator:(e,r,t)=>(0,i.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:e,className:"font-medium text-[#0A84FF] underline-offset-2 transition-colors hover:text-[#409CFF] hover:underline",children:r},t),children:r.text}),t&&(0,i.jsx)("span",{className:"ml-1 inline-block h-4 w-1 animate-pulse bg-white/50 align-middle"})]}),r.imageUrl&&(console.log("[SferaAI Debug] Rendering image with src:",r.imageUrl),(0,i.jsx)("img",{src:r.imageUrl,alt:"Agent response image",className:"mt-3 w-full max-w-xs cursor-pointer rounded-lg border border-white/10 shadow-lg",onClick:()=>null==a?void 0:a(r.imageUrl),onError:e=>console.error("[SferaAI Debug] Image failed to load:",r.imageUrl,e)}))]})]})})}),v=a.memo(e=>{let{isAgentAvailable:r=!1,onSend:t=async()=>{},chatOpen:s=!0,onChatOpenChange:l}=e,u=(0,a.useRef)(null),[h,x]=(0,a.useState)(!1),[m,p]=(0,a.useState)(""),v=async()=>{if(m.trim())try{x(!0),await t(m),p("")}catch(e){console.error("Error sending message:",e)}finally{x(!1)}};(0,a.useEffect)(()=>{u.current&&(u.current.style.height="auto",u.current.style.height="".concat(u.current.scrollHeight,"px"))},[m]);let f=h||!r;return(0,i.jsxs)("div",{className:"flex w-full items-end gap-2 border-t border-white/10 bg-black/20 p-3 backdrop-blur-xl",children:[(0,i.jsx)(b,{variant:"ghost",size:"icon",onClick:()=>l&&l(!s),className:"h-12 w-12 shrink-0 rounded-full text-white/50 transition-colors hover:bg-white/10 hover:text-white md:h-10 md:w-10",children:s?(0,i.jsx)(n.a,{}):(0,i.jsx)(o.Z,{})}),(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),v()},className:"flex w-full grow items-end gap-2",children:[(0,i.jsx)("div",{className:"relative flex-1",children:(0,i.jsx)(g,{ref:u,value:m,onChange:e=>p(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),v())},placeholder:"Type a message...",rows:1,className:"max-h-32 min-h-12 w-full resize-none rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-base text-white transition-all duration-200 placeholder:text-white/30 focus:border-white/20 focus:bg-white/10 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 md:min-h-10 md:py-2 md:text-sm",disabled:f})}),(0,i.jsx)(b,{size:"icon",type:"submit",disabled:f||0===m.trim().length,title:h?"Sending...":"Send",className:"h-12 w-12 shrink-0 self-end rounded-full bg-[#0A84FF] text-white shadow-lg transition-all duration-200 hover:bg-[#0077ED] disabled:bg-white/10 disabled:text-white/20 md:h-10 md:w-10",children:h?(0,i.jsx)(d.N,{className:"animate-spin",weight:"bold"}):(0,i.jsx)(c.S,{weight:"fill"})})]})]})}),f=e=>{let{transcripts:r,liveTranscript:t,isConnected:s,isConnecting:n,isConversationActive:o=!1,chatOpen:d=!0,onChatOpenChange:c}=e,u=(0,a.useRef)(null),{send:h}=(0,l.w)(),m=(0,l.M)(),[b,g]=(0,a.useState)(null),f=(0,a.useCallback)(e=>{g(e)},[]),w=m.some(e=>e.isAgent),j=(0,a.useCallback)(async e=>{h&&await h(e)},[h]);(0,a.useEffect)(()=>{u.current&&d&&u.current.scrollTo({top:u.current.scrollHeight,behavior:"smooth"})},[r,t,d]);let k=n||s,y=r.length>0||!!(null==t?void 0:t.text);return k?(0,i.jsxs)("div",{className:"chat-panel relative mx-auto w-full max-w-2xl",children:[(0,i.jsxs)("div",{className:"custom-scrollbar flex h-full w-full flex-col overflow-hidden rounded-[20px] shadow-[20px_20px_50px_rgba(0,0,0,0.5)] transition-all duration-500 ease-out hover:shadow-[0_0_15px_rgba(0,201,255,0.7),0_0_30px_rgba(0,201,255,0.5),inset_0_0_10px_rgba(0,201,255,0.3)]",style:{background:"rgba(255, 255, 255, 0.02)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",borderTop:"1px solid rgba(255, 255, 255, 0.5)",borderLeft:"1px solid rgba(255, 255, 255, 0.5)",opacity:+!!k,pointerEvents:k?"auto":"none"},children:[(0,i.jsxs)("div",{ref:u,className:(0,x.cn)("relative flex-1 transition-[max-height] duration-300 ease-in-out",d?"max-h-[75dvh] overflow-y-auto md:max-h-[40vh] lg:max-h-[30vh]":"max-h-4 overflow-hidden"),children:[(0,i.jsxs)("div",{className:"w-full space-y-6 p-5 transition-opacity duration-500 ease-in-out ".concat(y?"opacity-100":"opacity-0"),children:[r.map(e=>(0,i.jsx)(p,{entry:e,onImageClick:f},e.id)),t&&t.text&&(0,i.jsx)(p,{entry:t,isLive:!0,onImageClick:f})]}),(0,i.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center transition-opacity duration-300 ".concat(!y&&k&&d?"opacity-100":"opacity-0"),children:n?(0,i.jsx)("p",{className:"animate-pulse text-sm font-medium tracking-wide text-white/50",children:"INITIALIZING..."}):(0,i.jsx)("p",{className:"animate-pulse text-sm font-medium tracking-wide text-white/50",children:"LISTENING..."})})]}),o&&(0,i.jsx)(v,{isAgentAvailable:w,onSend:j,chatOpen:d,onChatOpenChange:c})]}),b&&(0,i.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/80 p-4 backdrop-blur-md transition-all duration-300",onClick:()=>g(null),children:(0,i.jsxs)("div",{className:"relative max-h-[90vh] max-w-[90vw] overflow-hidden rounded-2xl border border-white/10 shadow-2xl",children:[(0,i.jsx)("img",{src:b,alt:"Full size view",className:"max-h-[90vh] max-w-[90vw] object-contain"}),(0,i.jsx)("button",{onClick:()=>g(null),className:"absolute top-4 right-4 rounded-full bg-black/50 p-2 text-white transition-colors hover:bg-white/20",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 256 256",children:(0,i.jsx)("path",{d:"M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"})})})]})})]}):null}}}]);